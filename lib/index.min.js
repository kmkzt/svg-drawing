!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("two.js")):"function"==typeof define&&define.amd?define(["two.js"],e):"object"==typeof exports?exports["svg-drawing"]=e(require("two.js")):t["svg-drawing"]=e(t["two.js"])}(window,function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(e,n){e.exports=t},function(t,e,n){"use strict";n.r(e);var i,o=n(0),r=n.n(o),s=function(t){var e="string"==typeof t?(new DOMParser).parseFromString(t,"image/svg+xml"):t,n=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=e.querySelector("svg");return i?(["width","height","viewBox"].map(function(t){var e=i.getAttribute(t);e&&n.setAttribute(t,e)}),e.querySelectorAll("path").forEach(function(t){t.removeAttribute("transform"),n.appendChild(t)}),n):n},u=function(t){void 0===t&&(t=!0);try{var e=function(){return null};return window.addEventListener("testPassive",e,{passive:t}),window.removeEventListener("testPassive",e),{passive:t}}catch(t){return!1}},a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this,e)||this;return n.clearListner=n.clearListner.bind(n),n.toSvgXml=n.toSvgXml.bind(n),n.toSvgBase64=n.toSvgBase64.bind(n),n.drawingStart=n.drawingStart.bind(n),n.drawingMove=n.drawingMove.bind(n),n.drawingEnd=n.drawingEnd.bind(n),n.mouseUp=n.mouseUp.bind(n),n.mouseMove=n.mouseMove.bind(n),n.mouseDown=n.mouseDown.bind(n),n.touchStart=n.touchStart.bind(n),n.touchMove=n.touchMove.bind(n),n.touchEnd=n.touchEnd.bind(n),n.init.bind(n),n.line=null,n.current=new r.a.Vector(0,0),n.penColor=e.penColor||"#333",n.penWidth=e.penWidth||10,n.strokeCap=e.strokeCap||"round",n.strokeLineJoin=e.strokeLineJoin||"round",n.type=e.type||r.a.Types.svg,n.el=e.el,n.width=e.width||n.el.clientWidth,n.height=e.height||n.el.clientHeight,n.init(),n}return a(e,t),e.prototype.toSvgXml=function(){var t=this.renderer.domElement,e=s(t.outerHTML);return t?'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" height="'+this.height+'" viewBox="0 0 '+this.width+" "+this.height+'">'+e.innerHTML+"</svg>":null},e.prototype.toSvgBase64=function(){var t=this.toSvgXml();return t?"data:image/svg+xml;base64,"+btoa(t):null},e.prototype.clearListner=function(){this.el.removeEventListener("mousedown",this.mouseDown),this.el.removeEventListener("touchstart",this.touchStart)},e.prototype.init=function(){return this.appendTo(this.el),this.el.addEventListener("mousedown",this.mouseDown,u(!1)),this.el.addEventListener("touchstart",this.touchStart,u(!1)),this},e.prototype.drawingStart=function(t){var e=t.x,n=t.y;this.current.set(e,n)},e.prototype.drawingMove=function(t){var e=this,n=t.x,i=t.y,o=this.el.getBoundingClientRect(),s=function(t,e){return new r.a.Vector(t-o.left,e-o.top)};if(this.line){if(this.line.linewidth!==this.penWidth||this.line.stroke!==this.penColor)return void this.drawingEnd();var u=s(n,i);this.line.vertices.push(u)}else{var a=s(this.current.x,this.current.y),c=s(n,i);this.current.set(n,i),this.line=this.makeCurve([a,c],!0),this.line.noFill().stroke=this.penColor,this.line.linewidth=this.penWidth,this.line.cap=this.strokeCap,this.line.join=this.strokeLineJoin,this.line.vertices.map(function(t){e.line&&t.addSelf(e.line.translation)}),this.line.translation.clear()}},e.prototype.drawingEnd=function(){this.line=null},e.prototype.mouseDown=function(t){t.preventDefault(),this.drawingStart({x:t.clientX,y:t.clientY}),this.el.addEventListener("mousemove",this.mouseMove,u(!1)),this.el.addEventListener("mouseup",this.mouseUp,u(!1))},e.prototype.mouseMove=function(t){t.preventDefault(),this.drawingMove({x:t.clientX,y:t.clientY})},e.prototype.mouseUp=function(t){t.preventDefault(),this.el.removeEventListener("mousemove",this.mouseMove),this.el.removeEventListener("mouseup",this.mouseUp),this.drawingEnd()},e.prototype.touchStart=function(t){t.preventDefault();var e=t.touches[0];this.drawingStart({x:e.clientX,y:e.clientY}),this.el.addEventListener("touchmove",this.touchMove,u(!1)),this.el.addEventListener("touchend",this.touchEnd,u(!1))},e.prototype.touchMove=function(t){t.preventDefault();var e=t.touches[0];this.drawingMove({x:e.clientX,y:e.clientY})},e.prototype.touchEnd=function(t){t.preventDefault(),this.el.removeEventListener("touchmove",this.touchMove),this.el.removeEventListener("touchend",this.touchEnd),this.drawingEnd()},e}(r.a),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},d=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t},p=function(t){function e(e){var n=t.call(this,e)||this;return n.animationStart=n.animationStart.bind(n),n.shaking=n.shaking.bind(n),n.initSvgXml=n.initSvgXml.bind(n),n.strokeAnimation=n.strokeAnimation.bind(n),n.loadScene=n.loadScene.bind(n),n.loadSvgXml=n.loadSvgXml.bind(n),n.shakingRange=e.shakingRange||2,n.type=e.type||r.a.Types.canvas,n.el=e.el,n.width=e.width||n.el.clientWidth,n.height=e.height||n.el.clientHeight,n.animationStart(),n}return h(e,t),e.prototype.shaking=function(){var t=this,e=function(){return Math.random()*t.shakingRange-t.shakingRange/2},n=function(n,i){n%5==0&&t.scene.children.map(function(t){t.vertices&&t.vertices.map(function(t){t.position||(t.position=t.clone()),t.x=t.position.x+e(),t.y=t.position.y+e()})})};return this.bind("update",n).play(),function(){t.unbind("update",n),t.scene.children.map(function(t){var e=t.vertices;e&&e.map(function(t){t.position&&(t.x=t.position.x,t.y=t.position.y,delete t.position)})})}},e.prototype.loadScene=function(t){var e=this;this.clear(),t.children.map(function(t){e.scene.add(t.clone())}),this.update()},e.prototype.loadSvgXml=function(t){var e=this,n=s(t);if(n){var i=this.interpret(n);this.clear(),document.body.appendChild(n);var o=n.clientWidth;document.body.removeChild(n),this.scene.scale=this.width/o,i.children.map(function(t){e.scene.add(t.clone())}),this.scene.center().translation.set(this.width/2,this.height/2),this.update()}},e.prototype.animationStart=function(){return this.appendTo(this.el),this},e.prototype.initSvgXml=function(t){this.clear();var e=this.interpret(t);e.subdivide(),this.scene.add(e)},e.prototype.strokeAnimation=function(){var t=this,e=this.scene.children.reduce(function(t,e){var n,i=0;return e.vertices?(e.vertices.map(function(t,e){e>0&&(i+=n.distanceTo(t)),n=t}),d(t,[i])):t},[]),n=e.reduce(function(t,e){return t+e},0),i=0,o=function(){for(var o,r,s,u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];i<.9999?i+=.00625:i=0,o=t.scene,r=i*n,s=0,o.children.map(function(t,n){var i=e[n],o=s,u=s+i;t.ending=v(r,o,u,0,1),s=u})};return this.bind("update",o).play(),function(){return t.unbind("update",o)}},e}(r.a);var v=function(t,e,n,i,o){return function(t,e,n){return Math.max(Math.min(t,n),e)}(function(t,e,n,i,o){return i+(t-e)/(n-e)*(o-i)}(t,e,n,i,o),i,o)};n.d(e,"SvgDrawing",function(){return c}),n.d(e,"SvgAnimation",function(){return p})}])});