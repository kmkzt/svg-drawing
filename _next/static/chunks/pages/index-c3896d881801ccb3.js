(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7238:function(t,e,n){"use strict";var i,r=n(7328),a=n(1628),s=n(7729),o=n(9097),h=n(2784),u=n(6451),l=n(8694),c=n(2322),d=(0,l.createGlobalStyle)(i||(i=(0,r.Z)(["\n body, * {\n   margin: 0;\n   box-sizing: border-box;\n }\n\n  a {\n    color: initial;\n    text-decoration: initial;\n  }\n"]))),f=function(){return(0,c.jsx)(u.xu,{bg:"#fafafa",py:"8px",px:"16px",children:(0,c.jsxs)(u.kC,{justifyContent:"space-between",children:[(0,c.jsx)(u.xu,{width:.3,children:(0,c.jsx)(o.default,{href:"/",children:(0,c.jsx)("a",{children:(0,c.jsx)(u.xv,{fontSize:3,as:"h1",style:{whiteSpace:"nowrap"},children:"svg-drawing"})})})}),(0,c.jsxs)(u.kC,{as:"nav",alignContent:"center",width:.6,children:[(0,c.jsx)(o.default,{href:"/",children:(0,c.jsx)("a",{children:(0,c.jsx)(u.xv,{mr:2,children:"drawing"})})}),(0,c.jsx)(u.xv,{mr:2,children:(0,c.jsx)(o.default,{href:"/demo/animation",children:(0,c.jsx)("a",{children:"animation"})})}),(0,c.jsx)(u.xv,{mr:2,children:(0,c.jsx)(o.default,{href:"/demo/img-trace",children:(0,c.jsx)("a",{children:"img-trace"})})})]}),(0,c.jsx)(u.xu,{width:.1,style:{textAlign:"right"},children:(0,c.jsx)(u.rU,{color:"#000",href:"https://github.com/kmkzt/svg-drawing",children:(0,c.jsx)(a.X,{size:"24"})})})]})})};e.Z=function(t){var e=t.children,n=t.title,i=void 0===n?"":n;return(0,c.jsxs)(h.Fragment,{children:[(0,c.jsx)(s.default,{children:(0,c.jsx)("title",{children:"svg-drawing ".concat(i)})}),(0,c.jsx)(d,{}),(0,c.jsx)(f,{}),(0,c.jsx)(u.xu,{py:"12px",px:["2vw","2vw","5vw"],children:e})]})}},2715:function(t,e,n){"use strict";n.r(e);var i=n(8529),r=n(2755),a=n(1781),s=n(2784),o=n(6451),h=n(7238),u=n(2322),l=["none","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#ddd","#9E9E9E","#444","black"],c=function(){return"#".concat(Array.from({length:3},(function(){return String((t=255,Math.floor(Math.random()*Math.floor(t))).toString(16)).padStart(2,"0");var t})).join(""))},d=function(t){var e=t.isSp,n=(0,s.useState)(!1),d=n[0],f=n[1],p=(0,s.useState)(!0),v=p[0],g=p[1],m=(0,s.useState)(!1),w=m[0],x=m[1],b=(0,s.useState)("none"),_=b[0],C=b[1],y=(0,s.useState)("black"),j=y[0],E=y[1],k=(0,s.useState)(20),S=k[0],L=k[1],P=(0,s.useState)(5),O=P[0],R=P[1],A=(0,a.useSvgDrawing)({curve:v,close:w,delay:S,penWidth:O,fill:_}),z=(0,i.Z)(A,2),I=z[0],D=z[1],M=(0,s.useCallback)((function(t){return function(e){D.download({extension:t})}}),[D]),T=(0,s.useCallback)((function(t){D.changeFill("none"),D.changeClose(!1),f(t.target.checked)}),[D]),V=(0,s.useCallback)((function(){D.changeCurve(!v),g(!v)}),[v,D]),F=(0,s.useCallback)((function(){D.changeClose(!w),x(!w)}),[w,D]),N=(0,s.useCallback)((function(t){var e=Number(t.target.value);Number.isNaN(e)||(D.changePenWidth(e),R(e))}),[D]),U=(0,s.useCallback)((function(t){var e=Number(t.target.value);Number.isNaN(e)||(D.changeDelay(e),L(e))}),[D]),W=(0,s.useCallback)((function(t){D.changePenColor(t),E(t)}),[D]),B=(0,s.useCallback)((function(t){W(t.target.value)}),[W]),H=(0,s.useCallback)((function(t){return function(){W(t)}}),[W]),Z=(0,s.useCallback)((function(t){D.changeFill(t),C(t)}),[D]),X=(0,s.useCallback)((function(t){Z(t.target.value)}),[Z]),G=(0,s.useCallback)((function(t){return function(){Z(t)}}),[Z]),q=(0,s.useCallback)((function(){D.clear()}),[D]),J=(0,s.useCallback)((function(){D.undo()}),[D]);(0,s.useEffect)((function(){var t=setInterval((function(){if(d){var t=c();D.changePenColor(t),E(t)}}),4*S);return function(){return clearInterval(t)}}),[S,d,D]);var Y,Q=(0,s.useCallback)((function(t){var e,n=new FileReader;n.onload=function(t){if(t.target&&"string"===typeof t.target.result){var e=t.target.result.split(","),n=(0,i.Z)(e,2),r=n[0],a=n[1];if("data:image/svg+xml;base64"===r){var s=atob(a);if(!D.ref.current)return;D.ref.current.svg.parseSVGString(s),D.ref.current.update()}}},null!==(e=t.target)&&void 0!==e&&e.files&&n.readAsDataURL(t.target.files[0])}),[D.ref]);return(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(o.xu,{as:"fieldset",children:(0,u.jsxs)(o.kC,{flexWrap:"wrap",children:[(0,u.jsxs)(o.xu,{width:[1,.5,.5],pr:3,children:[(0,u.jsxs)(o.kC,{alignItems:"center",children:[(0,u.jsx)(r.__,{fontSize:[2,1,1],width:.3,htmlFor:"strokeWidth",children:"STROKE WIDTH:"}),(0,u.jsx)(r.iR,{width:.5,min:"1",max:"20",step:"1",value:O,onChange:N}),(0,u.jsx)(r.II,{width:"auto",id:"strokeWidth",type:"number",min:"1",max:"20",step:"1",value:O,onChange:N})]}),(0,u.jsxs)(o.kC,{alignItems:"center",children:[(0,u.jsx)(r.__,{width:.3,fontSize:[2,1,1],htmlFor:"throttleDelay",children:"THROTTLE DELAY:"}),(0,u.jsx)(r.iR,{width:.5,type:"range",min:"0",max:"300",step:"5",value:S,onChange:U}),(0,u.jsx)(r.II,{width:"auto",id:"throttleDelay",type:"number",min:"0",max:"300",step:"5",value:S,onChange:U})]}),(0,u.jsxs)(o.kC,{pt:3,justifyContent:"start",children:[(0,u.jsxs)(r.__,{htmlFor:"curve",children:[(0,u.jsx)(r.XZ,{id:"curve",checked:v,onChange:V}),"Curve"]}),!d&&(0,u.jsxs)(r.__,{htmlFor:"close",children:[(0,u.jsx)(r.XZ,{id:"close",checked:w,onChange:F}),"Close"]}),(0,u.jsxs)(r.__,{htmlFor:"rainbow",children:[(0,u.jsx)(r.XZ,{id:"rainbow",checked:d,onChange:T}),"Rainbow pen"]})]})]}),!d&&(0,u.jsxs)(o.xu,{width:[1,.5,.5],children:[(0,u.jsxs)(r.__,{fontSize:0,htmlFor:"fill",children:["FILL:",(0,u.jsx)(r.II,{p:1,fontSize:0,id:"fill",type:"text",placeholder:"#000 or black or rgba(0,0,0,1)",value:_,onChange:X})]}),(0,u.jsx)(o.kC,{flexWrap:"wrap",children:l.map((function(t){return(0,u.jsx)(o.xu,{width:["24px","24px","20px"],height:["24px","24px","20px"],style:{display:"inline-block",backgroundColor:t,border:t===_?"2px solid #000":"2px solid #999"},onClick:G(t)},t)}))}),(0,u.jsxs)(r.__,{fontSize:0,htmlFor:"penColor",style:{whiteSpace:"nowrap"},children:["PEN COLOR:",(0,u.jsx)(r.II,{fontSize:0,p:1,id:"penColor",type:"text",placeholder:"#000 or black or rgba(0,0,0,1)",value:j,onChange:B})]}),(0,u.jsx)(o.kC,{flexWrap:"wrap",children:l.map((function(t){return(0,u.jsx)(o.xu,{width:["24px","24px","20px"],height:["24px","24px","20px"],bg:t,style:{border:t===j?"2px solid #000":"2px solid #999"},onClick:H(t)},t)}))})]})]})}),(0,u.jsx)(o.xu,{as:"fieldset",children:(0,u.jsxs)(o.kC,{flexWrap:"wrap",justifyContent:"start",children:[(0,u.jsxs)(o.xu,{mr:2,children:[(0,u.jsx)(o.zx,{mr:1,mb:1,onClick:q,children:"Clear"}),(0,u.jsx)(o.zx,{mr:1,mb:1,onClick:J,children:"Undo"}),(0,u.jsx)(o.zx,{variant:"secondary",mr:1,mb:1,onClick:M("png"),children:"Download PNG"}),(0,u.jsx)(o.zx,{variant:"secondary",mr:1,mb:1,onClick:M("jpg"),children:"Download JPG"}),(0,u.jsx)(o.zx,{variant:"secondary",mr:1,mb:1,onClick:M("svg"),children:"Download SVG"})]}),!e&&(0,u.jsxs)(o.xu,{width:"auto",children:[(0,u.jsx)(o.xv,{fontSize:0,children:"Svg exported by this library can be read."}),(0,u.jsx)(r.II,{type:"file",onChange:Q,multiple:!0,accept:"image/*"})]})]})}),(0,u.jsx)(o.xu,{width:["96vw","96vw","40vw"],height:["96vw","96vw","40vw"],children:(0,u.jsx)("div",{ref:I,style:{backgroundImage:(Y=30,"\n  repeating-linear-gradient(\n    90deg,\n    #ddd ,\n    #ddd 1px,\n    transparent 1px,\n    transparent ".concat(String(Y),"px\n  ),\n  repeating-linear-gradient(\n    0deg,\n    #ddd ,\n    #ddd 1px,\n    transparent 1px,\n    transparent ").concat(String(Y),"px\n  )\n")),backgroundSize:"".concat(30,"px ").concat(30,"px"),border:"1px solid #333",margin:"0 auto 0 0",width:"100%",height:"100%",touchAction:"none"}})})]})};d.getInitialProps=function(t){var e=t.req,n=e?e.headers["user-agent"]:navigator.userAgent;return{isSp:!n||/iPhone|Android.+Mobile/.test(n)}},e.default=d},8738:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2715)}])},1781:function(t,e,n){!function(t,e){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},a=function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.toVector=function(){var t=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)),e=Math.atan2(this.y,this.x);return new h(t,e)},e.scale=function(e){return new t(this.x*e,this.y*e)},e.add=function(e){return new t(this.x+e.x,this.y+e.y)},e.sub=function(e){return new t(this.x-e.x,this.y-e.y)},e.eql=function(t){return this.x===t.x&&this.y===t.y},e.clone=function(){return new t(this.x,this.y)},t}(),s={MOVE:"M",MOVE_RELATIVE:"m",LINE:"L",LINE_RELATIVE:"l",CURVE:"C",CURVE_RELATIVE:"c",CLOSE:"Z",HORIZONTAL:"H",HORIZONTAL_RELATIVE:"h",VERTICAL:"V",VERTICAL_RELATIVE:"v",ARC_CURVE:"A",ARC_CURVE_RELATIVE:"a",QUADRATIC_CURVE:"Q",QUADRATIC_CURVE_RELATIVE:"q"},o=function(){function t(t,e){void 0===e&&(e=[]),this.value=e,this.type=t}var e,n,r,o=t.prototype;return o.toString=function(){return this.type===s.CLOSE?s.CLOSE:this.type+" "+this.value.map((function(t){return void 0===e&&(e=2),+t.toFixed(e);var e})).join(" ")},o.scale=function(e){return new t(this.type,this.value.map((function(t){return t*e})))},o.clone=function(){return new t(this.type,this.value.slice())},e=t,(n=[{key:"cr",get:function(){if(("C"===this.type||"c"===this.type)&&6===this.value.length){var t=this.value.slice(2,4),e=t[0],n=t[1];return new a(e,n)}},set:function(t){t&&("C"!==this.type&&"c"!==this.type||6!==this.value.length||(this.value.splice(2,1,t.x),this.value.splice(3,1,t.y)))}},{key:"cl",get:function(){if(("C"===this.type||"c"===this.type)&&6===this.value.length){var t=this.value.slice(0,2),e=t[0],n=t[1];return new a(e,n)}},set:function(t){t&&("C"!==this.type&&"c"!==this.type||6!==this.value.length||(this.value.splice(0,1,t.x),this.value.splice(1,1,t.y)))}},{key:"point",get:function(){var t=this.value.slice(this.value.length-2);return 2===t.length?new a(t[0],t[1]):void 0},set:function(t){t&&(this.value.splice(this.value.length-2,1,t.x),this.value.splice(this.value.length-1,1,t.y))}}])&&i(e.prototype,n),r&&i(e,r),t}(),h=function(){function t(t,e){this.value=t,this.angle=e}var e=t.prototype;return e.toPoint=function(){var t=Math.cos(this.angle)*this.value,e=Math.sin(this.angle)*this.value;return new a(t,e)},e.scale=function(e){return new t(this.value*e,this.angle)},t}(),u=function(){function t(t){void 0===t&&(t={});var e=t.d,n=r(t,["d"]);this.attrs=n,this.commands=[],e&&this.parseCommandString(e)}var e=t.prototype;return e.scale=function(t){return this.commands=this.commands.map((function(e){return e.scale(t)})),this.attrs.strokeWidth=String(t*+(this.attrs.strokeWidth||0)),this},e.addCommand=function(t){var e;return Array.isArray(t)?(e=this.commands).push.apply(e,t):this.commands.push(t),this},e.getCommandString=function(){return 0===this.commands.length?"":this.commands.map((function(t,e){return t.toString()})).join(" ").trim()},e.parseCommandString=function(t){this.commands=[];for(var e,n=null,i=[],r=t.split(" "),a=function(t){return Object.values(s).includes(t)?t:null},h=0;h<r.length;h+=1){var u=a(r[h]);if(u){if(!n){n=u;continue}this.commands.push(new o(n,i)),n=u,i=[]}else{if((e=+r[h])!=e)return;i.push(+r[h])}}null!==n&&this.commands.push(new o(n,i))},e.parsePathElement=function(t){for(var e=0;e<t.attributes.length;e+=1){var n,i=t.attributes.item(e);i&&i.value&&("d"!==i.name?this.attrs=Object.assign(Object.assign({},this.attrs),((n={})[(r=i.name,r.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()})))]=i.value,n)):this.parseCommandString(i.value))}var r;return this},e.toJson=function(){return Object.assign(Object.assign({},this.attrs),{d:this.getCommandString()})},e.clone=function(){var e=new t(this.attrs);return this.commands.map((function(t){e.commands.push(t.clone())})),e},t}(),l=function(){function t(t){var e=t.width,n=t.height,i=t.background;this.paths=[],this.width=e,this.height=n,this.background=i}var e=t.prototype;return e.resize=function(t){var e=t.width,n=t.height;this.scalePath(e/this.width),this.width=e,this.height=n},e.scalePath=function(t){if(1!==t)for(var e=0;e<this.paths.length;e+=1)this.paths[e].scale(t);return this},e.addPath=function(t){var e;return Array.isArray(t)?(e=this.paths).push.apply(e,t):this.paths.push(t),this},e.clonePaths=function(){return this.paths.map((function(t){return t.clone()}))},e.updatePath=function(t,e){var n=e||this.paths.length-1;return n<0&&this.paths.push(t),this.paths[n]=t,this},e.toJson=function(){return{width:this.width,height:this.height,background:this.background,paths:this.paths.map((function(t){return t.toJson()}))}},e.copy=function(t){return this.paths=t.clonePaths(),t.width&&this.width&&this.scalePath(this.width/t.width),this},e.parseSVGString=function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml").querySelector("svg");return e?this.parseSVGElement(e):(this.paths=[],this)},e.parseSVGElement=function(t){var e=[];t.querySelectorAll("path").forEach((function(t){var n=(new u).parsePathElement(t);0!==n.commands.length&&e.push(n)})),this.paths=e;var n=Number(t.getAttribute("width"));return n&&this.width&&this.scalePath(this.width/n),this},t}(),c=function(){function t(t){var e=(void 0===t?{}:t).ratio;this.ratio=null!=e?e:.2}var e=t.prototype;return e._controlPoint=function(t,e,n){var i=new a(t.x,t.y),r=new a(e.x,e.y),s=new a(n.x,n.y).sub(i).toVector().scale(this.ratio).toPoint(),o=r.add(s);return[o.x,o.y]},e.bezierCurve=function(t,e,n,i){var r=[].concat(this._controlPoint(t,e,n),this._controlPoint(i,n,e),[n.x,n.y]);return new o(s.CURVE,r)},e.lineCommands=function(t){return t.map((function(t,e){return new o(0===e?s.MOVE:s.LINE,[t.x,t.y])}))},e.bezierCurveCommands=function(t){var e=[];if(t.length<3)return this.lineCommands(t);for(var n=0;n<t.length;n+=1)0!==n?e.push(this.bezierCurve(t[n-2<0?0:n-2],t[n-1],t[n],n<t.length-1?t[n+1]:t[n])):e.push(new o(s.MOVE,[t[n].x,t[n].y]));return e},t}(),d="http://www.w3.org/2000/svg",f=function(t,e){var n=document.createElementNS(d,t);return Object.keys(e).sort().map((function(t){n.setAttribute(t,e[t])})),n},p=function(t){var e=Object.entries(t).reduce((function(t,e,n){var i,r,a=e[0],s=e[1];return s?Object.assign(Object.assign({},t),((i={})[(r=a,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())]=s,i)):t}),{});return f("path",e)},v=function(t){var e,n,i,r=t.width,a=t.height,s=t.background,o=t.paths,h={width:String(r),height:String(a)},u=s?[f("rect",Object.assign(Object.assign({},h),{fill:s}))]:[];return e=h,n=[].concat(u,o.map(p)),(i=document.createElementNS(d,"svg")).setAttributeNS(null,"version","1.1"),i.setAttribute("xmlns",d),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),Object.keys(e).sort().map((function(t){i.setAttribute(t,e[t])})),n.map((function(t){i.appendChild(t)})),i},g=function(){function t(t,e){var n=(void 0===e?{}:e).background;this.el=t;var i=t.getBoundingClientRect(),r=i.width,a=i.height;t.appendChild(v({background:n,width:r,height:a,paths:[]}))}return t.prototype.update=function(t){this.el.replaceChild(v(t),this.el.childNodes[0])},t}(),m=function(t){return"data:image/svg+xml;base64,"+btoa(t)},w={png:"image/png",jpg:"image/jpeg",svg:"image/svg+xml"},x=function(t){for(var e=t.data,n=t.extension,i=t.filename,r=atob(e.replace(/^.*,/,"")),a=new Uint8Array(r.length),s=0;s<r.length;s+=1)a[s]=r.charCodeAt(s);var o=i||Date.now()+"."+n,h=new Blob([a.buffer],{type:w[n]});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(h,o);else if(window.URL&&window.URL.createObjectURL){var u=document.createElement("a");u.download=o,u.href=window.URL.createObjectURL(h),document.body.appendChild(u),u.click(),document.body.removeChild(u)}else window.open(e,"_blank")},b={extension:"svg"},_=function(t,e,n){void 0===e&&(e=b),void 0===n&&(n=x);var i,r=Object.assign(Object.assign({},b),e),a=r.filename,s=r.extension,o=(i=t.toJson(),m(v(i).outerHTML));if("svg"!==s){var h=t.width,u=t.height,l=t.background,c=new Image;c.addEventListener("load",(function(){var t=document.createElement("canvas");t.setAttribute("width",String(h)),t.setAttribute("height",String(u));var e=t.getContext("2d");e&&((l||"jpg"===s)&&(e.fillStyle=l||"#fff",e.fillRect(0,0,h,u)),e.drawImage(c,0,0),n("png"===s?{data:t.toDataURL("image/png"),extension:"png"}:{data:t.toDataURL("image/jpeg"),extension:"jpg"}))}),!1),c.src=o}else n({data:o,extension:"svg",filename:a})},C={pointer:{start:["pointerdown"],move:["pointermove"],end:["pointerleave","pointercancel"],frameout:["pointerup"]},touch:{start:["touchstart"],move:["touchmove"],end:["touchend"],frameout:["touchcancel"]},mouse:{start:["mousedown"],move:["mousemove"],end:["mouseleave","mouseout"],frameout:["mouseup"]}},y=function(){function t(t,e){var n=e.end,i=e.start,r=e.move;this._el=t,this.end=n,this.start=i,this.move=r,this._clearEventList=[],this._listenerOption=function(t){void 0===t&&(t=!0);try{var e=function(){return null};return addEventListener("testPassive",e,{passive:t}),removeEventListener("testPassive",e),{passive:t}}catch(t){return!1}}(!1);var a=t.getBoundingClientRect(),s=a.left,o=a.top;this._left=s,this._top=o,this._handleStart=this._handleStart.bind(this),this._handleMove=this._handleMove.bind(this),this._handleEnd=this._handleEnd.bind(this)}var e=t.prototype;return e.off=function(){this._clearEventList.map((function(t){return t()})),this._clearEventList=[]},e.on=function(){this.off(),this._setupCoordinatesListener(),window.PointerEvent?this._setupDrawListener("pointer"):this._setupDrawListener("mouse"),"ontouchstart"in window&&this._setupDrawListener("touch")},e._handleStart=function(t){t.preventDefault(),this.start()},e._handleEnd=function(t){t.preventDefault(),this.end()},e._handleMove=function(t){var e;if(t.preventDefault(),t instanceof TouchEvent){var n=t.touches[0];this.move({x:n.clientX-this._left,y:n.clientY-this._top,pressure:n.force})}else t instanceof PointerEvent?this.move({x:t.clientX-this._left,y:t.clientY-this._top,pressure:t.pressure}):t instanceof MouseEvent&&this.move({x:t.clientX-this._left,y:t.clientY-this._top,pressure:null===(e=t)||void 0===e?void 0:e.pressure})},e._setupDrawListener=function(t){var e,n=this,i=C[t],r=i.start,a=i.move,s=i.end,o=i.frameout,h=r.map((function(t){return n._el.addEventListener(t,n._handleStart,n._listenerOption),function(){return n._el.removeEventListener(t,n._handleStart)}})),u=a.map((function(t){return n._el.addEventListener(t,n._handleMove,n._listenerOption),function(){return n._el.removeEventListener(t,n._handleMove)}})),l=s.map((function(t){return n._el.addEventListener(t,n._handleEnd,n._listenerOption),function(){return n._el.removeEventListener(t,n._handleEnd)}})),c=o.map((function(t){return addEventListener(t,n._handleEnd,n._listenerOption),function(){return removeEventListener(t,n._handleEnd)}}));(e=this._clearEventList).push.apply(e,h.concat(u,l,c))},e._setupCoordinatesListener=function(){var t=this,e=function(e){var n=t._el.getBoundingClientRect(),i=n.left,r=n.top;t._left=i,t._top=r};addEventListener("scroll",e),this._el.addEventListener("resize",e),this._clearEventList.push((function(){removeEventListener("scroll",e),t._el.removeEventListener("resize",e)}))},t}(),j=function(){function t(t,e){var n=e.resize;this._el=t,this.resize=n,this._clearEventList=[]}var e=t.prototype;return e.off=function(){this._clearEventList.map((function(t){return t()})),this._clearEventList=[]},e.on=function(){this.off(),this._setupListerner()},e._setupListerner=function(){var t=this;if(window.ResizeObserver){var e=new window.ResizeObserver((function(e){var n=e[0];t.resize(n.contentRect)}));e.observe(this._el),this._clearEventList.push((function(){return e.disconnect()}))}else{var n=function(){t.resize(t._el.getBoundingClientRect())};addEventListener("resize",n),this._clearEventList.push((function(){return removeEventListener("resize",n)}))}},t}();function E(t,e,n){var i,r,a;void 0===n&&(n={});var s=null,o=0,h=function(){o=!1===n.leading?0:Date.now(),s=null,a=t.apply(i,r),s||(i=null,r=null)},u=function(){s&&(clearTimeout(s),s=null)};return function(){var l=Date.now();o||!1!==n.leading||(o=l);var c=e-(l-o);i=this;for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return r=f,c<=0||c>e?(u(),o=l,a=t.apply(i,r),s||(i=null,r=null)):s||!1===n.trailing||(s=setTimeout(h,c)),a}}var k=function(){function t(t,e){var n=void 0===e?{}:e,i=n.penColor,r=n.penWidth,a=n.curve,s=n.close,o=n.delay,h=n.fill,u=n.background;this.el=t,this.penColor=null!=i?i:"#000",this.penWidth=null!=r?r:1,this.curve=null==a||a,this.close=null!=s&&s,this.delay=null!=o?o:0,this.fill=null!=h?h:"none";var d=t.getBoundingClientRect(),f=d.width,p=d.height;this._drawPath=null,this._drawPoints=[],this.svg=new l({width:f,height:p,background:u}),this.renderer=new g(t,{background:u}),this.convert=new c,this._resize=this._resize.bind(this),this.resizeHandler=new j(t,{resize:this._resize}),this.drawStart=this.drawStart.bind(this),this.drawMove=this.drawMove.bind(this),this._drawMoveThrottle=E(this.drawMove,this.delay),this.drawEnd=this.drawEnd.bind(this),this.drawHandler=new y(t,{start:this.drawStart,move:this._drawMoveThrottle,end:this.drawEnd}),this.on()}var e=t.prototype;return e.update=function(){this.renderer.update(this.svg.toJson())},e.clear=function(){var t=this.svg.paths;return this.svg.paths=[],this.update(),t},e.undo=function(){var t=this.svg.paths.pop();return this.update(),t},e.changeDelay=function(t){this.delay=t,this.drawHandler.move=E(this.drawMove,this.delay),this.drawHandler.on()},e.on=function(){this.drawHandler.on(),this.resizeHandler.on()},e.off=function(){this.drawHandler.off(),this.resizeHandler.off()},e.drawStart=function(){this._drawPath||(this._drawPath=this._createDrawPath(),this.svg.addPath(this._drawPath))},e.drawMove=function(t){this._drawPath&&(this._addDrawPoint(t),(this._drawPath.attrs.strokeWidth&&+this._drawPath.attrs.strokeWidth!==this.penWidth||this._drawPath.attrs.stroke!==this.penColor)&&(this._drawPath=this._createDrawPath(),this._addDrawPoint(t),this.svg.addPath(this._drawPath)),this.update())},e.drawEnd=function(){this._drawPath=null,this.update()},e._createCommand=function(){this._drawPath&&(this.curve?this._drawPath.commands=this.convert.bezierCurveCommands(this._drawPoints):this._drawPath.commands=this.convert.lineCommands(this._drawPoints),this.close&&this._drawPath.commands.push(new o(s.CLOSE)))},e._addDrawPoint=function(t){this._drawPoints.push(t),this._createCommand()},e._createDrawPath=function(){return this._resize(this.el.getBoundingClientRect()),this._drawPoints=[],new u({stroke:this.penColor,strokeWidth:String(this.penWidth),fill:this.fill,strokeLinecap:this.curve?"round":"mitter",strokeLinejoin:this.curve?"round":"square"})},e._resize=function(t){var e,n,i=t.width,r=t.height;e=this.svg.width,n=i,Math.trunc(e)!==Math.trunc(n)&&(this.svg.resize({width:i,height:r}),this.update())},e.download=function(t){_(this.svg,t)},t}();t.useSvgDrawing=function(t){var i=e.useRef(null),r=e.useRef(null),a=e.useCallback((function(){return r.current?v(r.current.svg.toJson()).outerHTML:null}),[]),s=e.useCallback((function(t){r.current&&r.current.download(t)}),[]),o=e.useCallback((function(t){r.current&&t&&(r.current.penColor=t)}),[]),h=e.useCallback((function(t){r.current&&t&&(r.current.fill=t)}),[]),u=e.useCallback((function(t){r.current&&t&&r.current.changeDelay(t)}),[]),l=e.useCallback((function(t){r.current&&(r.current.penWidth=Number(t))}),[]),c=e.useCallback((function(t){r.current&&(r.current.close=null!=t&&t)}),[]),d=e.useCallback((function(t){r.current&&(r.current.curve=null==t||t)}),[]),f=e.useCallback((function(){r.current&&r.current.clear()}),[]),p=e.useCallback((function(){r.current&&r.current.undo()}),[]);return e.useEffect((function(){r.current||i.current&&(r.current=new k(i.current,n({},t)))})),[i,{ref:r,changePenWidth:l,changePenColor:o,changeFill:h,changeDelay:u,changeClose:c,changeCurve:d,clear:f,undo:p,getSvgXML:a,download:s}]},Object.defineProperty(t,"__esModule",{value:!0})}(e,n(2784))},8529:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var i=n(7211);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a=[],s=!0,o=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);s=!0);}catch(h){o=!0,r=h}finally{try{s||null==n.return||n.return()}finally{if(o)throw r}}return a}}(t,e)||(0,i.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(t){t.O(0,[374,774,888,179],(function(){return e=8738,t(t.s=e);var e}));var e=t.O();_N_E=e}]);